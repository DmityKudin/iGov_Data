<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test">
  <process id="_doc_universal_vertical_sz" name="Службова записка " isExecutable="true">
    <startEvent id="startevent1" name="Start">
      <extensionElements>
        <activiti:formProperty id="sID_Custom_GovPublic" name="Номер звернення ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="processInstanceId" name="ід процеса ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Службова записка" type="string"></activiti:formProperty>
      </extensionElements>
    </startEvent>
    <userTask id="usertask1" name="Створення документа :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="processDefinitionId" name="processDefinitionId; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll2" name="bSubmitedAll2 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll3" name="bSubmitedAll3 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll4" name="bSubmitedAll4 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" required="true"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sName_Head" name="Керівник; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sLogin_Head" name="sLogin_Head ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" required="true"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableFile_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Executor_1" name="Виконавець; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTable_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Controller_1" name="Контролер; ;sID_SubjectRole=Executor,sID_Group_Activiti=sID_Group_Activiti,nDeepLevel=nDeepLevel" type="select"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAccept_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAgree_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableDirect_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="bAuthorEdit" name="для теста; ;bVisible=false" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti_All" name="id група все; ;bVisible=false" type="string" default="GROUP"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevelDepart" name="глубина; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}">
          <activiti:field name="sKey_GroupPostfix_New">
            <activiti:expression><![CDATA[${sLoginAuthor}]]></activiti:expression>
          </activiti:field>
          <activiti:field name="sKey_GroupPostfix">
            <activiti:string><![CDATA[_default_UB]]></activiti:string>
          </activiti:field>
        </activiti:taskListener>
      </extensionElements>
    </userTask>
    <userTask id="usertask2" name="Узгодження документу :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" type="string" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll2" name="bSubmitedAll2 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll3" name="bSubmitedAll3 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll4" name="bSubmitedAll4 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
 
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="bAuthorEdit" name="Автору на редактирование; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}"></activiti:taskListener>
      </extensionElements>
    </userTask>
    <userTask id="usertask2_yellow" name="Затвердження документу :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" type="string" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll2" name="bSubmitedAll2 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll3" name="bSubmitedAll3 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="bSubmitedAll4" name="bSubmitedAll4 ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
 
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="bAuthorEdit" name="автору на редактирование; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}"></activiti:taskListener>
      </extensionElements>
    </userTask>
    <userTask id="usertask3" name="Винесення резолюції адресатом :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" type="string" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
 
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableFileAdditional" name="Додаткові додатки; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/btsol/sTableFile_doc_btsol_vertical_sz_Additional.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Executor_2" name="Виконавець; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/btsol/sTable_doc_btsol_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Controller_2" name="Контролер; ;sID_SubjectRole=Executor,sID_Group_Activiti=sID_Group_Activiti,nDeepLevel=nDeepLevel" type="select"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true,bVisible=false" type="table" writable="false"></activiti:formProperty>
        <activiti:formProperty id="asActionDocUT4" name="Резолюція; ;bVisible=false" type="enum" default="sEnumSign">
          <activiti:value id="sEnumSign" name="Дозволити"></activiti:value>
          <activiti:value id="sEnumRemark" name="Відмовити"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}"></activiti:taskListener>
      </extensionElements>
    </userTask>
    <scriptTask id="scripttask1" name="ProcessInstanceId" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var processInstanceId = execution.getProcessInstanceId();
execution.setVariable('processInstanceId', processInstanceId)


execution.setVariable('sTitleDoc', "Службова записка")

// ПІБ заявника
var sLoginAuthor = execution.getVariable('sLoginAuthor')
var oResultAuthorName = subjectService.getSubjectByLoginAccount(sLoginAuthor)
execution.setVariable('sNameDismissal', oResultAuthorName.sLabel)
// Департамент автора
var obj2 = subjectGroupTreeService.getSubjectGroupsTreeUp(sLoginAuthor,'Organ')
var sDepartment_Dismissal = obj2[0].oSubject.sLabel
execution.setVariable('sDepartment_Dismissal', sDepartment_Dismissal)
//Посада
var obj3 = subjectGroupService.getSubjectGroup(sLoginAuthor)
var sPosition_Dismissal = obj3.oSubjectHumanPositionCustom.sNote
execution.setVariable('sPosition_Dismissal', sPosition_Dismissal) 
// Група керівника заявника
var obj1 = subjectGroupTreeService.getSubjectGroupsTreeUp(sLoginAuthor,'Human')
var sLogin_Head = obj1[0].sID_Group_Activiti
var sName_Head = obj1[0].oSubject.sLabel
var sPosition_Head = obj1[0].oSubjectHumanPositionCustom.sNote
execution.setVariable('sLogin_Head', sLogin_Head)
execution.setVariable('sName_Head', sName_Head)
execution.setVariable('sPosition_Head', sPosition_Head)</script>
    </scriptTask>
    <scriptTask id="scripttask4" name="права узгоджуючим,Step3" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId()
var oSwitchStep12 = documentStepService.setDocumentStep(snID_Process_Activiti, 'step_3')

var sUnsign=execution.getVariable('eRemoveSignes');
var bUnsign=true;
if(sUnsign=='sEnumLeave') bUnsign=false;

var oCloneRightsAgree = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti,  '_default_UB_approve_1', 'sTableAgree', 'sLogin_Approver', 'step_3', true, bUnsign)

var oCloneRightsRes = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti,  '_default_UB_2', 'sTableDirect', 'sLogin_Direct', 'step_4', true, true)

//
execution.setVariable('eRemoveSignes','sEnumLeave');</script>
    </scriptTask>
    <sequenceFlow id="flow21" sourceRef="scripttask1" targetRef="usertask1"></sequenceFlow>
    <sequenceFlow id="flow23" sourceRef="startevent1" targetRef="scripttask1"></sequenceFlow>
    <sequenceFlow id="flow60" sourceRef="scripttask4" targetRef="usertask2_yellow"></sequenceFlow>
    <scriptTask id="scripttask6" name="права погоджуючим,Step2" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId();
var oSwitchStep2 = documentStepService.setDocumentStep(snID_Process_Activiti, 'step_2');

var sUnsign=execution.getVariable('eRemoveSignes');
var bUnsign=true;
if(sUnsign=='sEnumLeave') bUnsign=false;

var oCloneRightsAgree = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti, '_default_UB_approve', 'sTableAccept', 'sLogin_Acceptor',  'step_2', true, bUnsign)

var oCloneRightsAgree = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti,  '_default_UB_approve_1', 'sTableAgree', 'sLogin_Approver', 'step_3', true, bUnsign)
var oCloneRightsAgree = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti,  '_default_UB_2', 'sTableDirect', 'sLogin_Direct', 'step_4', true, true)

//даем права участникам задания
var aLoginTask = processSubjectTaskService.getProcessSubjectByDocument(snID_Process_Activiti,  null);
for (var i = 0; i &lt; aLoginTask.length; i++){
	var sKey_GroupPostfix_New  = aLoginTask[i];
      var bLoginConteinsOnDocumentSteps = documentStepService.isLoginConteinsOnDocumentSteps(snID_Process_Activiti, sKey_GroupPostfix_New, true);
 	if(sKey_GroupPostfix_New != null &amp;&amp; !bLoginConteinsOnDocumentSteps){
  		var oCloneRightsAgree =  documentStepService.cloneDocumentStepSubject(snID_Process_Activiti, '_default_btsol_approve', sKey_GroupPostfix_New, 'step_2', true)
 }
}

//
execution.setVariable('eRemoveSignes','sEnumLeave');</script>
    </scriptTask>
    <scriptTask id="scripttask10" name="All Signes Step2" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var nID_Process = execution.getProcessInstanceId();
var bSubmitedAll2="";
var oCheckSubmitedAll2= documentStepService.isDocumentStepSubmitedAll(nID_Process, 'test', 'step_2')
execution.setVariable('bSubmitedAll2', oCheckSubmitedAll2.bSubmitedAll.toString())
		</script>
    </scriptTask>
    <sequenceFlow id="flow76" name="все подписали" sourceRef="exclusivegateway5" targetRef="scripttask4">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll2 == true}]]></conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="exclusivegateway5" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow78" sourceRef="scripttask10" targetRef="exclusivegateway5"></sequenceFlow>
    <sequenceFlow id="flow79" sourceRef="exclusivegateway5" targetRef="usertask2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll2 == false}]]></conditionExpression>
    </sequenceFlow>
    <scriptTask id="scripttask11" name="All Signes Step3" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var nID_Process = execution.getProcessInstanceId();
var oCheckSubmitedAll3= documentStepService.isDocumentStepSubmitedAll(nID_Process, 'test', 'step_3')
execution.setVariable('bSubmitedAll3', oCheckSubmitedAll3.bSubmitedAll.toString())</script>
    </scriptTask>
    <exclusiveGateway id="exclusivegateway6" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow80" sourceRef="scripttask11" targetRef="exclusivegateway6"></sequenceFlow>
    <sequenceFlow id="flow82" name="все утвердили" sourceRef="exclusivegateway6" targetRef="scripttask22">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll3 == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow86" sourceRef="usertask2" targetRef="exclusivegateway14"></sequenceFlow>
    <sequenceFlow id="flow90" sourceRef="usertask2_yellow" targetRef="exclusivegateway16"></sequenceFlow>
    <sequenceFlow id="flow93" sourceRef="exclusivegateway6" targetRef="usertask2_yellow">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll3 == false}]]></conditionExpression>
    </sequenceFlow>
    <scriptTask id="scripttask18" name="Create approval date" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>execution.setVariable('sDateApprove', new Date().format("dd/MM/yyyy").toString())</script>
    </scriptTask>
    <sequenceFlow id="flow109" sourceRef="scripttask18" targetRef="scripttask11"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway12" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow111" sourceRef="scripttask44" targetRef="exclusivegateway12"></sequenceFlow>
    <sequenceFlow id="flow112" sourceRef="exclusivegateway12" targetRef="usertask2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll2 == 'false'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow113" sourceRef="exclusivegateway12" targetRef="exclusivegateway28">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll2 == 'true'}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent2" name="End"></endEvent>
    <scriptTask id="scripttask21" name="старт задания" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId();                                                                 
var result = processSubjectTaskService.startProcess(snID_Process_Activiti)</script>
    </scriptTask>
    <scriptTask id="scripttask22" name="права адресату,Step4" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId()
var oSwitchStep12 = documentStepService.setDocumentStep(snID_Process_Activiti, 'step_4')
var oCloneRightsAgree = documentStepService.syncDocumentSubmitedsByField(snID_Process_Activiti,  '_default_UB_2', 'sTableDirect', 'sLogin_Direct', 'step_4', true, true)

//4. получение ИД БП
var executeProcessDefinitionId = execution.getProcessDefinitionId();
var splittedProcessDefinitionId = executeProcessDefinitionId.split(':')[0];
execution.setVariable('processDefinitionId', splittedProcessDefinitionId)

</script>
    </scriptTask>
    <sequenceFlow id="flow121" sourceRef="scripttask22" targetRef="usertask3"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway14" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow123" sourceRef="exclusivegateway14" targetRef="scripttask10">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${sLoginAuthor != sLogin_LastSubmited}]]></conditionExpression>
    </sequenceFlow>
    <userTask id="usertask4" name="Автору на редагування :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="processDefinitionId" name="processDefinitionId; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" type="string" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" required="true"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
 
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" required="true"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableFile_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Executor_1" name="Виконавець; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTable_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Controller_1" name="Контролер; ;sID_SubjectRole=Executor,sID_Group_Activiti=sID_Group_Activiti,nDeepLevel=nDeepLevel" type="select"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAccept_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAgree_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableDirect_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="bAuthorEdit" name="для теста; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="eRemoveSignes" name="Зняти підписи; ;sID_CheckboxTrue=sEnumRemove" type="enum" default="sEnumLeave">
          <activiti:value id="sEnumRemove" name=""></activiti:value>
          <activiti:value id="sEnumLeave" name=""></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}"></activiti:taskListener>
      </extensionElements>
    </userTask>
    <sequenceFlow id="flow124" sourceRef="exclusivegateway14" targetRef="scripttask25">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${sLoginAuthor==sLogin_LastSubmited}]]></conditionExpression>
    </sequenceFlow>
    <scriptTask id="scripttask25" name="права автору, степ5" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId()
var oSwitchStep12 = documentStepService.setDocumentStep(snID_Process_Activiti, 'step_5')
var sKey_GroupPostfix_New = execution.getVariable('sLoginAuthor')
var oResult = documentStepService.cloneDocumentStepSubject(snID_Process_Activiti, '_default_UB_avtor_edit', sKey_GroupPostfix_New, 'step_5', true)</script>
    </scriptTask>
    <sequenceFlow id="flow125" sourceRef="scripttask25" targetRef="usertask4"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway16" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow131" sourceRef="exclusivegateway16" targetRef="scripttask18">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${sLoginAuthor != sLogin_LastSubmited}]]></conditionExpression>
    </sequenceFlow>
    <scriptTask id="scripttask27" name="права автору, степ6" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId()
var oSwitchStep12 = documentStepService.setDocumentStep(snID_Process_Activiti, 'step_6')
var sKey_GroupPostfix_New = execution.getVariable('sLoginAuthor')
var oResult = documentStepService.cloneDocumentStepSubject(snID_Process_Activiti, '_default_UB_avtor_edit', sKey_GroupPostfix_New, 'step_6', true)</script>
    </scriptTask>
    <sequenceFlow id="flow132" sourceRef="exclusivegateway16" targetRef="scripttask27">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${sLoginAuthor==sLogin_LastSubmited}]]></conditionExpression>
    </sequenceFlow>
    <userTask id="usertask5" name="Автору на редагування :: ${sTitleDoc}">
      <extensionElements>
        <activiti:formProperty id="processInstanceId" name="ІД процесу ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="processDefinitionId" name="processDefinitionId; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sKey_Step_Document" name="sKey_Step_Document ; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="sID_Group_Activiti" name="id групи ; ;bVisible=false" type="string" default="UB_Head"></activiti:formProperty>
        <activiti:formProperty id="nDeepLevel" name="глибина ; ;bVisible=false" type="string" default="5"></activiti:formProperty>
        <activiti:formProperty id="sTitleDoc" name="Назва документа" type="string" default="Службова записка" required="true"></activiti:formProperty>
        <activiti:formProperty id="sNameDismissal" name="Ініціатор" type="string" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sDepartment_Dismissal" name="Департамент (структурний підрозділ)" type="string" writable="false"></activiti:formProperty>
 
        <activiti:formProperty id="sTextForm" name=" " type="fileHTML" required="true"></activiti:formProperty>
        <activiti:formProperty id="sTableFile" name="Додатки; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableFile_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Executor_1" name="Виконавець; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTable_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="oProcessSubject_Controller_1" name="Контролер; ;sID_SubjectRole=Executor,sID_Group_Activiti=sID_Group_Activiti,nDeepLevel=nDeepLevel" type="select"></activiti:formProperty>
        <activiti:formProperty id="sTableAccept" name="Узгоджуючі; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAccept_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableAgree" name="Затверджуючий; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableAgree_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sTableDirect" name="Адресат; ;bNew=true" type="table" default="${markerService.loadFromFile('table/sed/sTableDirect_doc_universal_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="eRemoveSignes" name="Зняти підписи; ;sID_CheckboxTrue=sEnumRemove" type="enum" default="sEnumLeave">
          <activiti:value id="sEnumRemove" name=""></activiti:value>
          <activiti:value id="sEnumLeave" name=""></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="eReturnDocument" name="Повернути на узгодження; ;sID_CheckboxTrue=sEnumYes" type="enum" default="sEnumNo">
          <activiti:value id="sEnumYes" name=""></activiti:value>
          <activiti:value id="sEnumNo" name=""></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="bAuthorEdit" name="для теста; ;bVisible=false" type="string"></activiti:formProperty>
        <activiti:formProperty id="markers1" name="если снести подписи" type="markers" default="${markerService.loadFromFile('_doc_btsol_vertical_sz.json')}"></activiti:formProperty>
        <activiti:formProperty id="sBody_1" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz.html] ; ;bVisible=false" type="string" default="Друк службової записки з адресатом" writable="false"></activiti:formProperty>
        <activiti:formProperty id="sBody_2" name="[pattern/print/iDoc/btsol/_doc_btsol_vertical_sz_no_header.html] ; ;bVisible=false" type="string" default="Друк службової записки без адресата" writable="false"></activiti:formProperty>
        <activiti:taskListener event="create" delegateExpression="${DocumentInit_iDoc}"></activiti:taskListener>
      </extensionElements>
    </userTask>
    <sequenceFlow id="flow133" sourceRef="scripttask27" targetRef="usertask5"></sequenceFlow>
    <sequenceFlow id="flow134" sourceRef="usertask5" targetRef="exclusivegateway25"></sequenceFlow>
    <sequenceFlow id="flow167" sourceRef="usertask4" targetRef="scripttask6"></sequenceFlow>
    <scriptTask id="scripttask44" name="Check Signes" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>// проверка всех подписей
var nID_Process = execution.getProcessInstanceId()
var oCheckSubmitedAll= documentStepService.isDocumentStepSubmitedAll(nID_Process, 'test', 'step_2')
execution.setVariable('bSubmitedAll2', oCheckSubmitedAll.bSubmitedAll.toString())

var oCheckSubmitedAll3= documentStepService.isDocumentStepSubmitedAll(nID_Process, 'test', 'step_3')
execution.setVariable('bSubmitedAll3', oCheckSubmitedAll3.bSubmitedAll.toString())</script>
    </scriptTask>
    <sequenceFlow id="flow175" sourceRef="usertask1" targetRef="scripttask6"></sequenceFlow>
    <sequenceFlow id="flow176" sourceRef="scripttask6" targetRef="scripttask44"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway25" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow177" sourceRef="exclusivegateway25" targetRef="scripttask4">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${eReturnDocument =='sEnumNo'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow178" sourceRef="exclusivegateway25" targetRef="scripttask6">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${eReturnDocument =='sEnumYes'}]]></conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="exclusivegateway27" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow181" sourceRef="exclusivegateway27" targetRef="scripttask21">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${asActionDocUT4 != 'refuse'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow182" sourceRef="exclusivegateway27" targetRef="endevent2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${asActionDocUT4 == 'refuse'}]]></conditionExpression>
    </sequenceFlow>
    <scriptTask id="scripttask45" name="скрипт проверки отказа" scriptFormat="javascript" activiti:autoStoreVariables="false">
      <script>var snID_Process_Activiti = execution.getProcessInstanceId()
var aDocumentStepLogin = documentStepService.getDocumentStepLogins(snID_Process_Activiti, false);
for (var i = 0; i &lt; aDocumentStepLogin .length; i++){
 var oDocumentStepLogin = aDocumentStepLogin[i];
 if(oDocumentStepLogin != null &amp;&amp; oDocumentStepLogin.oDocumentStepSubjectSignType != null 
  &amp;&amp; oDocumentStepLogin.oDocumentStepSubjectSignType.sID != null
  &amp;&amp; oDocumentStepLogin.oDocumentStepSubjectSignType.sID == 'refuse'){
  execution.setVariable('asActionDocUT4', 'refuse');
            
 }    
}</script>
    </scriptTask>
    <sequenceFlow id="flow183" sourceRef="scripttask45" targetRef="exclusivegateway27"></sequenceFlow>
    <sequenceFlow id="flow184" sourceRef="usertask3" targetRef="scripttask45"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway28" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow185" sourceRef="exclusivegateway28" targetRef="scripttask4">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll3 == false}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow186" sourceRef="exclusivegateway28" targetRef="scripttask22">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${bSubmitedAll3 == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow187" sourceRef="scripttask21" targetRef="endevent2"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram__doc_universal_vertical_sz">
    <bpmndi:BPMNPlane bpmnElement="_doc_universal_vertical_sz" id="BPMNPlane__doc_universal_vertical_sz">
      <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="41.0" y="109.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask1" id="BPMNShape_usertask1">
        <omgdc:Bounds height="84.0" width="130.0" x="247.0" y="85.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask2" id="BPMNShape_usertask2">
        <omgdc:Bounds height="84.0" width="131.0" x="654.0" y="267.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask2_yellow" id="BPMNShape_usertask2_yellow">
        <omgdc:Bounds height="84.0" width="131.0" x="654.0" y="560.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask3" id="BPMNShape_usertask3">
        <omgdc:Bounds height="84.0" width="130.0" x="655.0" y="840.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask1" id="BPMNShape_scripttask1">
        <omgdc:Bounds height="55.0" width="105.0" x="110.0" y="100.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask4" id="BPMNShape_scripttask4">
        <omgdc:Bounds height="55.0" width="105.0" x="667.0" y="464.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask6" id="BPMNShape_scripttask6">
        <omgdc:Bounds height="56.0" width="132.0" x="465.0" y="99.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask10" id="BPMNShape_scripttask10">
        <omgdc:Bounds height="55.0" width="105.0" x="540.0" y="373.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway5" id="BPMNShape_exclusivegateway5">
        <omgdc:Bounds height="40.0" width="40.0" x="699.0" y="380.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask11" id="BPMNShape_scripttask11">
        <omgdc:Bounds height="55.0" width="105.0" x="525.0" y="669.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway6" id="BPMNShape_exclusivegateway6">
        <omgdc:Bounds height="40.0" width="40.0" x="699.0" y="676.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask18" id="BPMNShape_scripttask18">
        <omgdc:Bounds height="55.0" width="105.0" x="525.0" y="574.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway12" id="BPMNShape_exclusivegateway12">
        <omgdc:Bounds height="40.0" width="40.0" x="699.0" y="179.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent2" id="BPMNShape_endevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="455.0" y="1030.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask21" id="BPMNShape_scripttask21">
        <omgdc:Bounds height="55.0" width="105.0" x="540.0" y="923.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask22" id="BPMNShape_scripttask22">
        <omgdc:Bounds height="55.0" width="105.0" x="667.0" y="750.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway14" id="BPMNShape_exclusivegateway14">
        <omgdc:Bounds height="40.0" width="40.0" x="932.0" y="207.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask4" id="BPMNShape_usertask4">
        <omgdc:Bounds height="55.0" width="105.0" x="1184.0" y="199.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask25" id="BPMNShape_scripttask25">
        <omgdc:Bounds height="55.0" width="105.0" x="1036.0" y="199.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway16" id="BPMNShape_exclusivegateway16">
        <omgdc:Bounds height="40.0" width="40.0" x="930.0" y="510.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask27" id="BPMNShape_scripttask27">
        <omgdc:Bounds height="55.0" width="105.0" x="1020.0" y="503.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask5" id="BPMNShape_usertask5">
        <omgdc:Bounds height="55.0" width="105.0" x="1153.0" y="503.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask44" id="BPMNShape_scripttask44">
        <omgdc:Bounds height="55.0" width="105.0" x="667.0" y="99.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway25" id="BPMNShape_exclusivegateway25">
        <omgdc:Bounds height="40.0" width="40.0" x="1185.0" y="420.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway27" id="BPMNShape_exclusivegateway27">
        <omgdc:Bounds height="40.0" width="40.0" x="452.0" y="930.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask45" id="BPMNShape_scripttask45">
        <omgdc:Bounds height="55.0" width="105.0" x="420.0" y="854.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway28" id="BPMNShape_exclusivegateway28">
        <omgdc:Bounds height="40.0" width="40.0" x="472.0" y="471.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow21" id="BPMNEdge_flow21">
        <omgdi:waypoint x="215.0" y="127.0"></omgdi:waypoint>
        <omgdi:waypoint x="247.0" y="127.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow23" id="BPMNEdge_flow23">
        <omgdi:waypoint x="76.0" y="126.0"></omgdi:waypoint>
        <omgdi:waypoint x="110.0" y="127.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow60" id="BPMNEdge_flow60">
        <omgdi:waypoint x="719.0" y="519.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="560.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow76" id="BPMNEdge_flow76">
        <omgdi:waypoint x="719.0" y="420.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="464.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="42.0" width="75.0" x="721.0" y="426.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow78" id="BPMNEdge_flow78">
        <omgdi:waypoint x="645.0" y="400.0"></omgdi:waypoint>
        <omgdi:waypoint x="699.0" y="400.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow79" id="BPMNEdge_flow79">
        <omgdi:waypoint x="719.0" y="380.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="351.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow80" id="BPMNEdge_flow80">
        <omgdi:waypoint x="630.0" y="696.0"></omgdi:waypoint>
        <omgdi:waypoint x="699.0" y="696.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow82" id="BPMNEdge_flow82">
        <omgdi:waypoint x="719.0" y="716.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="750.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="42.0" width="74.0" x="739.0" y="695.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow86" id="BPMNEdge_flow86">
        <omgdi:waypoint x="785.0" y="309.0"></omgdi:waypoint>
        <omgdi:waypoint x="951.0" y="308.0"></omgdi:waypoint>
        <omgdi:waypoint x="952.0" y="247.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow90" id="BPMNEdge_flow90">
        <omgdi:waypoint x="785.0" y="602.0"></omgdi:waypoint>
        <omgdi:waypoint x="949.0" y="602.0"></omgdi:waypoint>
        <omgdi:waypoint x="950.0" y="550.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow93" id="BPMNEdge_flow93">
        <omgdi:waypoint x="719.0" y="676.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="644.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow109" id="BPMNEdge_flow109">
        <omgdi:waypoint x="577.0" y="629.0"></omgdi:waypoint>
        <omgdi:waypoint x="577.0" y="669.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow111" id="BPMNEdge_flow111">
        <omgdi:waypoint x="719.0" y="154.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="179.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow112" id="BPMNEdge_flow112">
        <omgdi:waypoint x="719.0" y="219.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="267.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow113" id="BPMNEdge_flow113">
        <omgdi:waypoint x="699.0" y="199.0"></omgdi:waypoint>
        <omgdi:waypoint x="492.0" y="198.0"></omgdi:waypoint>
        <omgdi:waypoint x="492.0" y="471.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow121" id="BPMNEdge_flow121">
        <omgdi:waypoint x="719.0" y="805.0"></omgdi:waypoint>
        <omgdi:waypoint x="720.0" y="840.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow123" id="BPMNEdge_flow123">
        <omgdi:waypoint x="932.0" y="227.0"></omgdi:waypoint>
        <omgdi:waypoint x="592.0" y="226.0"></omgdi:waypoint>
        <omgdi:waypoint x="592.0" y="373.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow124" id="BPMNEdge_flow124">
        <omgdi:waypoint x="972.0" y="227.0"></omgdi:waypoint>
        <omgdi:waypoint x="1036.0" y="226.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow125" id="BPMNEdge_flow125">
        <omgdi:waypoint x="1141.0" y="226.0"></omgdi:waypoint>
        <omgdi:waypoint x="1184.0" y="226.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow131" id="BPMNEdge_flow131">
        <omgdi:waypoint x="930.0" y="530.0"></omgdi:waypoint>
        <omgdi:waypoint x="577.0" y="530.0"></omgdi:waypoint>
        <omgdi:waypoint x="577.0" y="574.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow132" id="BPMNEdge_flow132">
        <omgdi:waypoint x="970.0" y="530.0"></omgdi:waypoint>
        <omgdi:waypoint x="1020.0" y="530.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow133" id="BPMNEdge_flow133">
        <omgdi:waypoint x="1125.0" y="530.0"></omgdi:waypoint>
        <omgdi:waypoint x="1153.0" y="530.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow134" id="BPMNEdge_flow134">
        <omgdi:waypoint x="1205.0" y="503.0"></omgdi:waypoint>
        <omgdi:waypoint x="1205.0" y="460.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow167" id="BPMNEdge_flow167">
        <omgdi:waypoint x="1236.0" y="199.0"></omgdi:waypoint>
        <omgdi:waypoint x="1236.0" y="62.0"></omgdi:waypoint>
        <omgdi:waypoint x="531.0" y="62.0"></omgdi:waypoint>
        <omgdi:waypoint x="531.0" y="99.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow175" id="BPMNEdge_flow175">
        <omgdi:waypoint x="377.0" y="127.0"></omgdi:waypoint>
        <omgdi:waypoint x="465.0" y="127.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow176" id="BPMNEdge_flow176">
        <omgdi:waypoint x="597.0" y="127.0"></omgdi:waypoint>
        <omgdi:waypoint x="667.0" y="126.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow177" id="BPMNEdge_flow177">
        <omgdi:waypoint x="1185.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="718.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="719.0" y="464.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow178" id="BPMNEdge_flow178">
        <omgdi:waypoint x="1225.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="1310.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="1310.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="1310.0" y="440.0"></omgdi:waypoint>
        <omgdi:waypoint x="1322.0" y="411.0"></omgdi:waypoint>
        <omgdi:waypoint x="1322.0" y="94.0"></omgdi:waypoint>
        <omgdi:waypoint x="947.0" y="94.0"></omgdi:waypoint>
        <omgdi:waypoint x="521.0" y="94.0"></omgdi:waypoint>
        <omgdi:waypoint x="597.0" y="127.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow181" id="BPMNEdge_flow181">
        <omgdi:waypoint x="492.0" y="950.0"></omgdi:waypoint>
        <omgdi:waypoint x="540.0" y="950.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow182" id="BPMNEdge_flow182">
        <omgdi:waypoint x="472.0" y="970.0"></omgdi:waypoint>
        <omgdi:waypoint x="472.0" y="1030.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow183" id="BPMNEdge_flow183">
        <omgdi:waypoint x="525.0" y="881.0"></omgdi:waypoint>
        <omgdi:waypoint x="472.0" y="887.0"></omgdi:waypoint>
        <omgdi:waypoint x="472.0" y="930.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow184" id="BPMNEdge_flow184">
        <omgdi:waypoint x="655.0" y="882.0"></omgdi:waypoint>
        <omgdi:waypoint x="525.0" y="881.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow185" id="BPMNEdge_flow185">
        <omgdi:waypoint x="512.0" y="491.0"></omgdi:waypoint>
        <omgdi:waypoint x="667.0" y="491.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow186" id="BPMNEdge_flow186">
        <omgdi:waypoint x="492.0" y="511.0"></omgdi:waypoint>
        <omgdi:waypoint x="492.0" y="777.0"></omgdi:waypoint>
        <omgdi:waypoint x="667.0" y="777.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow187" id="BPMNEdge_flow187">
        <omgdi:waypoint x="592.0" y="978.0"></omgdi:waypoint>
        <omgdi:waypoint x="592.0" y="1047.0"></omgdi:waypoint>
        <omgdi:waypoint x="490.0" y="1047.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>